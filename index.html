<!DOCTYPE html>
<html lang="tr">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9TBV0530VS"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-9TBV0530VS');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Zamanli - Online Randevu Sistemi | Berber & Kuaf√∂r Randevu</title>
    <meta name="description" content="Berber, kuaf√∂r ve g√ºzellik salonlarƒ± i√ßin √ºcretsiz online randevu sistemi. Kolayca randevu al, sƒ±ra bekleme! T√ºrkiye'nin en kolay randevu platformu.">
    <meta name="keywords" content="online randevu, berber randevu, kuaf√∂r randevu, g√ºzellik salonu, randevu sistemi, zamanli, sa√ß kesimi randevu, istanbul berber">
    <meta name="author" content="Zamanli">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://zamanli.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://zamanli.com/">
    <meta property="og:title" content="Zamanli - Online Randevu Sistemi">
    <meta property="og:description" content="Berber, kuaf√∂r ve g√ºzellik salonlarƒ± i√ßin √ºcretsiz online randevu sistemi. Kolayca randevu al!">
    <meta property="og:image" content="https://zamanli.com/icons/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="tr_TR">
    <meta property="og:site_name" content="Zamanli">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://zamanli.com/">
    <meta name="twitter:title" content="Zamanli - Online Randevu Sistemi">
    <meta name="twitter:description" content="Berber, kuaf√∂r ve g√ºzellik salonlarƒ± i√ßin √ºcretsiz online randevu sistemi.">
    <meta name="twitter:image" content="https://zamanli.com/icons/og-image.png">
    
    <!-- Yapƒ±sal Veri - Organization -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Zamanli",
        "alternateName": "Zamanli Online Randevu Sistemi",
        "url": "https://zamanli.com",
        "logo": "https://zamanli.com/icons/logo.png",
        "description": "Berber, kuaf√∂r ve g√ºzellik salonlarƒ± i√ßin online randevu sistemi",
        "foundingDate": "2024",
        "sameAs": [],
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+90-543-383-85-87",
            "contactType": "customer service",
            "availableLanguage": "Turkish"
        }
    }
    </script>
    
    <!-- Yapƒ±sal Veri - WebApplication -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Zamanli",
        "description": "Berber, kuaf√∂r ve g√ºzellik salonlarƒ± i√ßin online randevu sistemi",
        "url": "https://zamanli.com",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web, iOS, Android",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "TRY",
            "description": "√úcretsiz ba≈ülangƒ±√ß paketi"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "150"
        }
    }
    </script>
    
    <!-- Yapƒ±sal Veri - SoftwareApplication (Google Play/App Store i√ßin) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Zamanli - Online Randevu",
        "operatingSystem": "Web",
        "applicationCategory": "BusinessApplication",
        "offers": {
            "@type": "Offer",
            "price": "0"
        }
    }
    </script>
    
    <!-- PWA Install Prompt - En Erken Yakala -->
    <script>window.addEventListener('beforeinstallprompt',(e)=>{e.preventDefault();window.__pwaPrompt=e;console.log('[PWA] Install prompt yakalandƒ±');});</script>
    
    <!-- PWA Temel -->
    <meta name="application-name" content="Zamanli">
    <meta name="theme-color" content="#0B2B26">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Apple/iOS PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Zamanli">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-128x128.png">
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1290-2796.png" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1179-2556.png" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1170-2532.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1284-2778.png" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1242-2688.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-828-1792.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1125-2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1242-2208.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-750-1334.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-640-1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2048-2732.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1668-2388.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1620-2160.png" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1536-2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)">
    
    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#0B2B26">
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-72x72.png">
    <link rel="shortcut icon" href="/icons/favicon.ico">
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico">
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Fonts: Satoshi + Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://api.fontshare.com" crossorigin>
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,600,700,800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="/" class="logo">
                <img src="/icons/logo.png" alt="Zamanli" class="logo-image">
                <span class="logo-text">Zamanli</span>
            </a>
            <nav class="nav desktop-nav">
                <a href="/berber/" class="nav-link">‚ú® Salonlar</a>
                <a href="/berber/kayit/" class="nav-link highlight">Salonunu Ekle</a>
                <a href="#" onclick="showLoginModal(); return false;" class="nav-link">üîë Giri≈ü</a>
            </nav>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>
    </header>
    
    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu">
        <div class="mobile-menu-header">
            <a href="/" class="logo">
                <img src="/icons/logo.png" alt="Zamanli" class="logo-image">
                <span class="logo-text">Zamanli</span>
            </a>
            <button class="mobile-menu-close" onclick="toggleMobileMenu()" aria-label="Men√ºy√º kapat">‚úï</button>
        </div>
        <nav class="mobile-menu-nav">
            <a href="/berber/" class="mobile-randevu-al"><i data-lucide="calendar-check" style="width:1.2em;height:1.2em;margin-right:0.35em;"></i> Randevu Al</a>
            <div class="mobile-menu-divider"></div>
            <a href="/" class="active">üè† Ana Sayfa</a>
            <span style="padding: 0.5rem 1.5rem; font-size: 0.75rem; color: var(--slate-400); text-transform: uppercase;">Kategoriler</span>
            <a href="/berber/?category=berber">üíà Berberler</a>
            <a href="/berber/?category=kuafor">üíá‚Äç‚ôÄÔ∏è Kuaf√∂rler</a>
            <a href="/berber/?category=beauty">üíÜ G√ºzellik Merkezleri</a>
            <a href="/berber/">‚ú® T√ºm Salonlar</a>
            <div class="mobile-menu-divider"></div>
            <a href="/fiyatlandirma/">üí∞ Fiyatlandƒ±rma</a>
            <a href="#" onclick="showLoginModal(); toggleMobileMenu(); return false;">üîë Giri≈ü Yap</a>
            <a href="/berber/kayit/" class="highlight">‚ú® Salonunu Ekle</a>
            <a href="#" onclick="ZamanliUX.showInstallPrompt(); toggleMobileMenu(); return false;" id="mobileInstallBtn" class="pwa-hide-when-installed pwa-hide-on-ios">üì≤ Uygulamayƒ± ƒ∞ndir</a>
        </nav>
        <div class="mobile-menu-footer">
            <p>¬© 2026 Zamanli</p>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <span class="hero-badge">‚ú® Online Randevu Sistemi</span>
                <h1>Salon Randevusu<br><span class="gradient-text">Artƒ±k √áok Kolay!</span></h1>
                <p class="hero-desc">Berber, kuaf√∂r ve g√ºzellik merkezlerini bul, anƒ±nda randevu al!</p>
                
                <!-- Kategori Kartlarƒ± -->
                <div class="category-cards">
                    <a href="/berber/?category=berber" class="category-card">
                        <span class="category-icon"><i data-lucide="scissors"></i></span>
                        <span class="category-name">Berberler</span>
                    </a>
                    <a href="/berber/?category=kuafor" class="category-card">
                        <span class="category-icon"><i data-lucide="sparkles"></i></span>
                        <span class="category-name">Kuaf√∂rler</span>
                    </a>
                    <a href="/berber/?category=beauty" class="category-card">
                        <span class="category-icon"><i data-lucide="flower-2"></i></span>
                        <span class="category-name">G√ºzellik</span>
                    </a>
                </div>
                
                <div class="hero-actions">
                    <a href="/berber/" class="btn btn-primary btn-lg hero-randevu-btn" id="randevuAlBtn">
                        <i data-lucide="calendar-check" style="width:1.2em;height:1.2em;margin-right:0.35em;"></i>
                        Randevu Al
                    </a>
                    <a href="/berber/" class="btn btn-outline btn-lg">
                        <i data-lucide="search" style="width:1.1em;height:1.1em;margin-right:0.35em;"></i>
                        T√ºm Salonlarƒ± G√∂r
                    </a>
                </div>

                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-value">7/24</span>
                        <span class="stat-label">Online Randevu</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">0</span>
                        <span class="stat-label">Bekleme S√ºresi</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">%100</span>
                        <span class="stat-label">√úcretsiz</span>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="phone-mockup">
                    <div class="phone-screen">
                        <div class="mock-header">
                            <span>‚ú®</span> Zamanli
                        </div>
                        <div class="mock-services">
                            <div class="mock-service">
                                <span>üíà Berber</span>
                                <span>‚Üí</span>
                            </div>
                            <div class="mock-service">
                                <span>üíá‚Äç‚ôÄÔ∏è Kuaf√∂r</span>
                                <span>‚Üí</span>
                            </div>
                            <div class="mock-service active">
                                <span>üíÜ G√ºzellik</span>
                                <span>‚Üí</span>
                            </div>
                        </div>
                        <div class="mock-calendar">
                            <div class="mock-day">Pzt</div>
                            <div class="mock-day">Sal</div>
                            <div class="mock-day active">√áar</div>
                            <div class="mock-day">Per</div>
                            <div class="mock-day">Cum</div>
                        </div>
                        <div class="mock-btn">Randevu Al</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <h2 class="section-title">Neden Zamanli?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon"><i data-lucide="zap"></i></div>
                    <h3>Anƒ±nda Randevu</h3>
                    <p>Telefon a√ßmadan, beklemeden saniyeler i√ßinde randevu al</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i data-lucide="message-circle"></i></div>
                    <h3>WhatsApp Hatƒ±rlatma</h3>
                    <p>Randevu saatinden √∂nce WhatsApp ile hatƒ±rlatma al</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i data-lucide="badge-check"></i></div>
                    <h3>≈ûeffaf Fiyatlar</h3>
                    <p>T√ºm hizmet fiyatlarƒ±nƒ± √∂nceden g√∂r, s√ºrpriz ya≈üama</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i data-lucide="star"></i></div>
                    <h3>Kaliteli Salonlar</h3>
                    <p>Onaylƒ± ve deƒüerlendirmeli berber salonlarƒ±</p>
                </div>
            </div>
        </div>
    </section>

    <!-- For Salons Section -->
    <section class="for-salons">
        <div class="container">
            <div class="salon-cta">
                <div class="salon-cta-content">
                    <span class="cta-badge">üíº Salon Sahipleri ƒ∞√ßin</span>
                    <h2>Salonunuzu Dijitale Ta≈üƒ±yƒ±n</h2>
                    <p>Online Randevu Sistemi ile m√º≈üterilerinize 7/24 hizmet verin. Hemen ba≈ülayƒ±n!</p>
                    <ul class="cta-features">
                        <li>‚úÖ Kolay kurulum (5 dakika)</li>
                        <li>‚úÖ WhatsApp entegrasyonu</li>
                        <li>‚úÖ Randevu y√∂netim paneli</li>
                        <li>‚úÖ PWA mobil uygulama</li>
                    </ul>
                    <a href="/fiyatlandirma/" class="btn btn-primary btn-lg">
                        ≈ûimdi Ba≈üla ‚Üí
                    </a>
                </div>
                <div class="salon-cta-visual">
                    <div class="dashboard-preview">
                        <div class="dash-header">üìä Y√∂netim Paneli</div>
                        <div class="dash-stats">
                            <div class="dash-stat">
                                <span class="dash-num">24</span>
                                <span class="dash-label">Bug√ºn</span>
                            </div>
                            <div class="dash-stat">
                                <span class="dash-num">156</span>
                                <span class="dash-label">Bu Hafta</span>
                            </div>
                            <div class="dash-stat">
                                <span class="dash-num">4.8‚≠ê</span>
                                <span class="dash-label">Puan</span>
                            </div>
                        </div>
                        <div class="dash-appointments">
                            <div class="dash-apt">
                                <span>09:00</span>
                                <span>Ahmet Y.</span>
                                <span class="dash-apt-status">‚úì</span>
                            </div>
                            <div class="dash-apt">
                                <span>09:45</span>
                                <span>Mehmet K.</span>
                                <span class="dash-apt-status">‚úì</span>
                            </div>
                            <div class="dash-apt active">
                                <span>10:30</span>
                                <span>Ali D.</span>
                                <span class="dash-apt-status pending">‚óØ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Kategoriler b√∂l√ºm√º kaldƒ±rƒ±ldƒ± (Phase 3.7) -->

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="/icons/logo.png" alt="Zamanli" class="logo-image">
                    <span class="logo-text">Zamanli</span>
                    <p>Online Randevu Sistemi</p>
                </div>
                <div class="footer-links">
                    <a href="/berber/">Salon Bul</a>
                    <a href="/berber/kayit/">Salonunu Ekle</a>
                    <a href="/fiyatlandirma/">Fiyatlandƒ±rma</a>
                    <a href="https://wa.me/905433838587" target="_blank">ƒ∞leti≈üim</a>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-legal">
                    <a href="/kvkk/">KVKK</a>
                    <a href="/gizlilik/">Gizlilik Politikasƒ±</a>
                    <a href="/kullanim-kosullari/">Kullanƒ±m Ko≈üullarƒ±</a>
                    <a href="/mesafeli-satis/">Mesafeli Satƒ±≈ü S√∂zle≈ümesi</a>
                </div>
                <p>&copy; 2026 Zamanli. T√ºm haklarƒ± saklƒ±dƒ±r.</p>
                <p class="footer-credit"><a href="https://feyzdigital.com" target="_blank">Feyz Digital</a> tarafƒ±ndan geli≈ütirildi.</p>
            </div>
        </div>
    </footer>
    
    <!-- Mobile Menu Overlay -->
    <div id="mobileMenuOverlay" class="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>
    
    <!-- Login Modal -->
    <div id="loginModal" class="login-modal-overlay">
        <div class="login-modal">
            <div class="login-modal-header">
                <h3>üîë Giri≈ü Yap</h3>
                <button class="login-modal-close" onclick="closeLoginModal()">√ó</button>
            </div>
            <div class="login-modal-body">
                <p class="login-modal-desc">Telefon numaranƒ±z ve PIN kodunuz ile giri≈ü yapƒ±n</p>
                <form onsubmit="handleLogin(event)">
                    <div class="login-form-group">
                        <label>Telefon Numarasƒ±</label>
                        <input type="tel" id="loginPhone" placeholder="05XX XXX XX XX" required>
                    </div>
                    <div class="login-form-group">
                        <label>PIN Kodu</label>
                        <input type="password" id="loginPin" placeholder="4-6 haneli PIN" maxlength="6" required>
                    </div>
                    <p id="loginError" class="login-error"></p>
                    <button type="submit" class="login-btn">Giri≈ü Yap</button>
                </form>
                <p class="login-register-link">Hen√ºz salonunuz yok mu? <a href="/berber/kayit/">√úcretsiz Kayƒ±t Ol</a></p>
            </div>
        </div>
    </div>
    
    <!-- Firebase & Push Notification Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-functions-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-messaging-compat.js"></script>
    <script src="/config.js"></script>
    <script src="/push-notifications.js"></script>
    
    <!-- Scripts -->
    <script>
        // Service Worker kaydƒ± + Otomatik G√ºncelleme
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => {
                        console.log('SW registered:', reg.scope);
                        
                        // G√ºncelleme kontrol√º
                        reg.addEventListener('updatefound', () => {
                            const newWorker = reg.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // Yeni versiyon hazƒ±r - kullanƒ±cƒ±ya bildir veya otomatik yenile
                                    console.log('New SW version available');
                                    newWorker.postMessage('SKIP_WAITING');
                                }
                            });
                        });
                    })
                    .catch(err => console.log('SW registration failed:', err));
                
                // SW'dan g√ºncelleme mesajƒ± gelince BANNER g√∂ster (otomatik reload deƒüil)
                let updateBannerShown = false;
                navigator.serviceWorker.addEventListener('message', (event) => {
                    if (event.data.type === 'SW_UPDATED' && !updateBannerShown) {
                        console.log('SW updated to', event.data.version);
                        updateBannerShown = true;
                        // Banner g√∂ster
                        showUpdateBanner();
                    }
                });
                
                function showUpdateBanner() {
                    if (document.getElementById('sw-update-banner')) return;
                    const banner = document.createElement('div');
                    banner.id = 'sw-update-banner';
                    banner.style.cssText = 'position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#1e293b;color:white;padding:12px 20px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.3);z-index:9999;display:flex;align-items:center;gap:12px;font-size:14px;';
                    banner.innerHTML = '<span>üîÑ G√ºncelleme mevcut</span><button onclick="location.reload()" style="background:#10B981;color:white;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:600;">Yenile</button><button onclick="this.parentElement.remove()" style="background:transparent;border:none;color:#94a3b8;cursor:pointer;font-size:18px;">√ó</button>';
                    document.body.appendChild(banner);
                }
                
                // Controller deƒüi≈üince banner g√∂ster (otomatik reload deƒüil)
                let refreshing = false;
                navigator.serviceWorker.addEventListener('controllerchange', () => {
                    if (!refreshing) {
                        refreshing = true;
                        // Otomatik reload yerine sadece log
                        console.log('SW controller changed');
                        // ƒ∞steƒüe baƒülƒ±: showUpdateBanner();
                    }
                });
            });
        }
        
        // Mobile Menu Toggle
        function toggleMobileMenu() {
            document.getElementById('mobileMenu').classList.toggle('active');
            document.getElementById('mobileMenuOverlay').classList.toggle('active');
            document.body.style.overflow = document.getElementById('mobileMenu').classList.contains('active') ? 'hidden' : '';
        }
        
        // ========== LOGIN MODAL ==========
        function showLoginModal() {
            document.getElementById('loginModal').classList.add('active');
        }
        
        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
            document.getElementById('loginError').classList.remove('show');
            document.getElementById('loginPhone').value = '';
            document.getElementById('loginPin').value = '';
        }
        
        async function handleLogin(e) {
            e.preventDefault();
            
            const rawPhone = document.getElementById('loginPhone').value.replace(/\D/g, '');
            const phone = rawPhone.slice(-10);
            const pin = document.getElementById('loginPin').value;
            const errorEl = document.getElementById('loginError');
            const btn = e.target.querySelector('button[type="submit"]');
            
            if (phone.length !== 10 || pin.length < 4) {
                errorEl.textContent = 'Ge√ßerli 10 haneli telefon ve PIN girin (05XX veya 5XX)';
                errorEl.classList.add('show');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Giri≈ü yapƒ±lƒ±yor...';
            errorEl.classList.remove('show');
            
            try {
                // Doƒürudan Cloud Function'a telefon + PIN g√∂nder (client collection scan kaldƒ±rƒ±ldƒ±)
                const verifyPinFn = firebase.app().functions('europe-west1').httpsCallable('verifyPinAuth');
                const result = await verifyPinFn({ pin: pin, phone: phone });
                
                if (result.data.success) {
                    const ud = result.data.userData;
                    
                    if (result.data.customToken) {
                        try { await firebase.auth().signInWithCustomToken(result.data.customToken); } catch (e) { console.warn('[Login] Custom token hatasƒ±:', e); }
                    }
                    
                    if (ud.isOwner) {
                        localStorage.setItem('salonSession', JSON.stringify({
                            type: 'owner', slug: ud.slug, salonId: ud.salonId,
                            phone: phone, expires: Date.now() + (7 * 24 * 60 * 60 * 1000)
                        }));
                        window.location.href = '/berber/salon/yonetim/?slug=' + ud.slug;
                    } else {
                        localStorage.setItem('staffSession', JSON.stringify({
                            type: 'staff', staffId: ud.staffId,
                            staffName: ud.staffName, staffRole: ud.staffRole || 'staff',
                            salonId: ud.salonId, salonSlug: ud.slug,
                            expires: Date.now() + (7 * 24 * 60 * 60 * 1000)
                        }));
                        window.location.href = '/berber/salon/yonetim/?slug=' + ud.slug + '&staff=' + encodeURIComponent(ud.staffId) + '&staffName=' + encodeURIComponent(ud.staffName);
                    }
                    return;
                }
                
                throw new Error('Telefon numarasƒ± veya PIN hatalƒ±');
                
            } catch (error) {
                const msg = error?.message || '';
                errorEl.textContent = (msg && /[ƒü√º≈üƒ±√∂√ßƒû√ú≈ûƒ∞√ñ√á]/.test(msg)) ? msg : 'Giri≈ü ba≈üarƒ±sƒ±z. L√ºtfen tekrar deneyin.';
                errorEl.classList.add('show');
                btn.disabled = false;
                btn.textContent = 'Giri≈ü Yap';
            }
        }
        
        // ESC ile modal kapat
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeLoginModal();
                const mobileMenu = document.getElementById('mobileMenu');
                if (mobileMenu && mobileMenu.classList.contains('active')) {
                    toggleMobileMenu();
                }
            }
        });
    </script>
    
    <!-- PWA Manager -->
    <script src="/pwa-manager.js"></script>
    
    <!-- UX Enhancements -->
    <script src="/ux-enhancements.js"></script>
    
    <script>
        if (typeof lucide !== 'undefined') lucide.createIcons();
    </script>
</body>
</html>
